<div class="image-wrapper">
  <img src="/playoffs-projection/Stadium2.jpg" alt="Stadium2" />
  <h2 class="title">Playoffs AI Analysis</h2>

  <!-- Overlay: table + legend together -->
  <div class="overlay">
    <table>
      <thead>
        <tr>
          <th>Dv</th>
          <th>Team</th>
          <th>W-L-T</th>
          <th>Pts</th>
          <th>DivSTATUS</th>
          <th>PlaySTATUS</th>
          <th>mIn</th>
          <th>Targets</th>
          <th>gIn</th>
          <th>DivTgts</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>N</td><td><a href="#">Brute Force</a></td><td>0-0-0</td><td>0</td><td>C:24.7%</td><td>C:41.8% T:17.2%</td><td>5</td><td>8.0-8.0</td><td>10</td><td>9.0-11.0</td></tr>
        <tr><td>N</td><td><a href="#">Comeback Kid</a></td><td>0-0-0</td><td>0</td><td>C:24.8%</td><td>C:41.7% T:17.4%</td><td>5</td><td>8.0-8.0</td><td>10</td><td>9.0-11.0</td></tr>
        <tr><td>E</td><td><a href="#">Muad'Dib üéó</a></td><td>0-0-0</td><td>0</td><td>C:24.8%</td><td>C:41.7% T:17.2%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
        <tr><td>S</td><td><a href="#">SlickBears üéó</a></td><td>0-0-0</td><td>0</td><td>C:25.2%</td><td>C:42.1% T:17.0%</td><td>5</td><td>8.0-8.0</td><td>9</td><td>9.0-11.0</td></tr>
        <tr><td>W</td><td><a href="#">People's Champ üéó</a></td><td>0-0-0</td><td>0</td><td>C:25.1%</td><td>C:42.1% T:17.2%</td><td>5</td><td>8.0-8.0</td><td>10</td><td>9.0-11.0</td></tr>
        <tr><td>E</td><td><a href="#">Pete Weber Bowl Clu</a></td><td>0-0-0</td><td>0</td><td>C:25.0%</td><td>C:41.8% T:17.1%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
        <tr><td>E</td><td><a href="#">Fields love irving</a></td><td>0-0-0</td><td>0</td><td>C:25.0%</td><td>C:42.0% T:17.2%</td><td>5</td><td>8.0-8.0</td><td>10</td><td>9.0-11.0</td></tr>
        <tr><td>S</td><td><a href="#">bLuE BaLLeRs</a></td><td>0-0-0</td><td>0</td><td>C:24.9%</td><td>C:41.9% T:17.3%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
        <tr><td>W</td><td><a href="#">88boyz11</a></td><td>0-0-0</td><td>0</td><td>C:25.1%</td><td>C:42.1% T:17.1%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
        <tr><td>W</td><td><a href="#">PrimeTime Prodigies</a></td><td>0-0-0</td><td>0</td><td>C:25.0%</td><td>C:42.0% T:17.0%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
        <tr><td>S</td><td><a href="#">TexasTimeshifts</a></td><td>0-0-0</td><td>0</td><td>C:24.9%</td><td>C:42.0% T:17.2%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
        <tr><td>S</td><td><a href="#">Loud and Stroud</a></td><td>0-0-0</td><td>0</td><td>C:24.8%</td><td>C:41.7% T:17.1%</td><td>5</td><td>8.0-8.0</td><td>10</td><td>9.0-11.0</td></tr>
        <tr><td>N</td><td><a href="#">Bay Area Party</a></td><td>0-0-0</td><td>0</td><td>C:25.3%</td><td>C:42.1% T:17.2%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
        <tr><td>E</td><td><a href="#">Vick2times</a></td><td>0-0-0</td><td>0</td><td>C:25.0%</td><td>C:42.2% T:17.1%</td><td>5</td><td>8.0-8.0</td><td>10</td><td>9.0-11.0</td></tr>
        <tr><td>N</td><td><a href="#">CeeDees TDs üèÜ</a></td><td>0-0-0</td><td>0</td><td>C:25.0%</td><td>C:41.9% T:17.2%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
        <tr><td>W</td><td><a href="#">Do it to them</a></td><td>0-0-0</td><td>0</td><td>C:24.6%</td><td>C:41.7% T:17.4%</td><td>5</td><td>8.0-8.0</td><td>11</td><td>9.0-11.0</td></tr>
      </tbody>
    </table>

    <!-- Legend directly below table, INSIDE overlay -->
    <div class="legend">
      <strong>LEGEND:</strong><br />
      Status C = Clinch %<br />
      T = % that will end up in a tiebreak not resolved yet<br />
      mIn = Wins needed for any chance<br />
      Target = Projected Wins needed<br />
      gIn = Wins that should guarantee a spot (if any then Controls Own Destiny)<br /><br />
      <em>
        Due to many remaining games the analysis incorporated some randomization methods. 
        The accuracy of status, odds, targets, and 'paths' will depend on the depth of analysis 
        as well as the number of remaining games.
      </em>
    </div>
  </div>
</div>

<style>
.image-wrapper {
  position: relative;
  max-width: 900px;
  margin: 0.5rem auto;
}
.image-wrapper img {
  display: block;
  width: 100%;
  border-radius: 8px;
}
.title {
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  font-weight: bold;
  font-size: clamp(1.6rem, 3.6vw, 2.2rem);
  margin: 0;
  white-space: nowrap;                /* keep inline */
  color: white;
  text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
}
.overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: min(97%, 880px);
  max-height: 70%;
  overflow: auto;
  padding: 0.25rem 0.5rem;
  background: rgba(0,0,0,0.4);
  border-radius: 6px;
}
.overlay table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.75rem;
  line-height: 1rem;
}
.overlay th, .overlay td {
  padding: 2px 4px;
  text-align: center;
  white-space: nowrap;
}
.overlay th {
  background: rgba(0,0,0,0.6);
  color: white;
}
.overlay td {
  color: white;
  border-bottom: 1px solid rgba(255,255,255,0.12);
}
.overlay td:first-child,
.overlay td:nth-child(2) { text-align: left; }
.overlay a { color: #4da6ff; font-weight: bold; text-decoration: none; }
.overlay a:hover { text-decoration: underline; }

/* Legend inside JPG, plain white text */
.legend {
  margin-top: 0.5rem;
  font-size: 0.7rem;
  line-height: 1rem;
  color: white;
  text-align: left;
}
.legend strong { color: #ffd966; }
.legend em { color: #ddd; font-size: 0.65rem; }
</style>

<script>
/* Sort table rows: by DV (N, E, W, S order) then by DivSTATUS high ‚Üí low */
document.addEventListener('DOMContentLoaded', () => {
  const tbody = document.querySelector('.overlay table tbody');
  if (!tbody) return;

  const dvOrder = ['N', 'E', 'W', 'S']; // desired DV order
  const rows = Array.from(tbody.querySelectorAll('tr'));

  const getDivStatus = (text) => {
    // expects something like "C:24.7%"
    const match = text.match(/:\s*([\d.]+)%/);
    return match ? parseFloat(match[1]) : -Infinity;
  };

  rows.sort((a, b) => {
    const dvA = a.cells[0].textContent.trim();
    const dvB = b.cells[0].textContent.trim();
    const dvCmp = dvOrder.indexOf(dvA) - dvOrder.indexOf(dvB);
    if (dvCmp !== 0) return dvCmp;

    const dsA = getDivStatus(a.cells[4].textContent);
    const dsB = getDivStatus(b.cells[4].textContent);
    return dsB - dsA; // high to low
  });

  rows.forEach(r => tbody.appendChild(r));
});
</script>
